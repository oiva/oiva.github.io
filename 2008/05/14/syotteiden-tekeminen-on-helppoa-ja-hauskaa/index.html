<!DOCTYPE html>




<html lang="fi">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://farm4.staticflickr.com">

  <title>Syötteiden tekeminen on helppoa ja hauskaa</title>
  <meta name="description" content="RSS-syötteen voi tehdä yksinkertaisella PHP-skriptillä, kunhan muistaa pari pientä kikkaa.">
  <meta name="author" content="Oiva Eskola" />
  <meta name="keywords" content="web-kehitys, PHP" />
  <meta name="dc.date" content="2008-05-14">

  <script>
    var host = "oivaeskola.fi";
    if (host == window.location.host && window.location.protocol != "https:") {
      window.location.protocol = "https:";
    }
  </script>

  <link href='https://fonts.googleapis.com/css?family=PT+Serif:700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://oivaeskola.fi/2008/05/14/syotteiden-tekeminen-on-helppoa-ja-hauskaa/">
  <link rel="alternate" type="application/rss+xml" title="Oiva Eskola" href="https://oivaeskola.fi/feed.xml" />
  <link rel="author" href="https://plus.google.com/107009261645586212751/posts"/>
</head>

  <body>
    <header class="site-header">
  <div class="wrapper">
    <a class="site-title" href="/">Oiva Eskola</a>
    <nav class="site-nav">
      <a href="#" class="menu-icon" style="display: none">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          
          
          
            <a class="page-link " href="/about/">
              About
            </a>
          
          
          
          
          
            <a class="page-link " href="/archive/">
              Blog Archive
            </a>
          
          
        </div>
    </nav>
  </div>
</header>
    <div class="page-content">
      <div class="wrapper">
        



<div class="post">
  
    <header class="post-header">
      <h1 class="post-title">Syötteiden tekeminen on helppoa ja hauskaa</h1>
      
      
        <p class="post-meta">14.5.2008</p>
      
    </header>
  

  <article class="post-content">
    <p>Tein <a href="http://www.paulaminni.fi/" title="Käsintehtyjä koruja">Paulan korusivuille</a> <a href="http://www.jorkki.com/artikkelit/mika_rss_opas_aloittelijoille.php">RSS-syötteen</a> uusista koruista. Syöte on tässä tapauksessa yksinkertainen PHP-skripti, joka hakee kannasta uusimmat korut ja liittää mukaan tarvittavat metatiedot.</p>
<p>Toteutuksessa oli hyötyä seuraavista linkeistä:<br />
<a href="http://cyber.law.harvard.edu/rss/rss.html">RSS 2.0 spesifikaatio</a><br />
<a href="http://feedvalidator.org/">Feed Validator</a><br />
<a href="http://en.wikipedia.org/wiki/RSS_(file_format)">RSS Wikipediassa</a><br />
<a id="more"></a><a id="more-90"></a></p>
<p>Lopullinen syötte näyttää jotakuinkin tältä (vähän karsittuna):</p>
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
  <title>Paulan korut</title>
  <link>http://www.paulaminni.fi</link>
  <language>fi</language>
  <lastBuildDate>Sat, 03 May 2008 21:11:18 +03:00</lastBuildDate>
  <item>
    <title>3.5.2008</title>
    <link>http://www.paulaminni.fi/korut/80</link>
    <guid>http://www.paulaminni.fi/korut/80</guid>
    <author>[sähköpostiosoite] (Paula Minni)</author>
    <description>
    <![CDATA[
        <img src="http://www.paulaminni.fi/kategoriat/Kaulakorut/_DSC0190.jpg" alt="" />
    ]]>
    </description>
  </item>
  <atom:link href="http://www.paulaminni.fi/feed.php" rel="self" type="application/rss+xml" />
</channel>
</rss>
```
<p>Syötteen päivittymisajankohtana voidaan käyttää uusimman korun julkaisuajankohtaa. Julkaisuajankohta on MySQL:n timestamp-muodossa, josta se saadaan haluttuun muotoon esimerkiksi seuraavalla koodinpätkällä:</p>
`$lastBuildDate = date("D, d M Y H:i:s O", strtotime($timestamp));`
<p>Itemien descriptioneiden sisällä voi käyttää HTML-koodia, kunhan muistaa merkitä sen <em>character dataksi</em>:</p>
<pre><code class="language-xml">&lt;description&gt;
&lt;![CDATA[
    &lt;!-- html-koodit tähän --&gt;
]]&gt;
&lt;/description&gt;
</code></pre>
<h3>Muuta huomionarvoista</h3>
RSS-syöte pitää tarjoilla palvelimelta <em>application/rss+xml</em> -muodossa. Helpoiten tämä onnistuu kun PHP:ssä sanoo ennen syötteen tulostamista:
`header('Content-type: application/rss+xml');`
<p>Selaimelle voi kertoa, että sivusta löytyy myös RSS-versio lisäämällä linkin syötteeseen XHTML-tiedoston head-osioon:
<code>&lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; href=&quot;http://www.paulaminni.fi/feed.php&quot; title=&quot;Tilaa syöte&quot; /&gt;</code></p>
<p>Syötteen tekeminen oli yllättävän helppoa. Skriptiä voisi vielä jatkokehittää niin, että se cachettaisi valmiin syötteen, eikä rakentaisi sitä joka kerta uudestaan tyhjästä. Nykyisillä liikennemäärillä tämä ei vielä ole ongelma.</p>

    
      
      
      
      
      <p class="categories">Kategoriat: 
        
          <a href="/archive/web-kehitys">web-kehitys</a>, 
          
        
          <a href="/archive/PHP">PHP</a>
          
        
      </p>
      
    
  </article>

  
  <section class="comments">
    
      <h2>1 kommentti</h2>
    
    
      <article class="comment">
        <h3 class="author">
        
          <a href="http://oivaeskola.fi/2008/08/12/uuden-fi-domainin-varaaminen-ja-sivuston-siirtaminen/" rel="author">Uuden .fi-domainin varaaminen ja sivuston siirtäminen &#8212; Oivallisia juttuja</a>
        
        
          &ndash; <time class="comment-date" pubdate datetime="2008-08-12T19:26:17+00:00">12.8.2008</time>
        
        </h3>
        <p>
          [...] varaaminen ja sivuston siirtäminen sujui hyvin, lukuun ottamatta sivustolla ollutta RSS-syötettä. Syötteen yksittäisten artikkelien tunnisteina oli käytetty kunkin artikkelin alkuperäisen [...]
        </p>
      </article>
    
    
    <p class="comments-closed">Kommentit on suljettu.</p>
    
  </section>
  

  <section class="feedback">
    
    <h2>Kysymyksiä tai kommentoitavaa?</h2>
    <p>Lähetä viesti <a href="https://toot.community/@oivaeskola">Mastodonissa</a> tai
      <a href="mailto:oiva.eskola@gmail.com">sähköpostilla</a>.</p>
    
  </section>
</div>

      </div>
    </div>
    
    <footer class="site-footer">
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <p>Subscribe <a href="/feed.xml">via RSS</a><br/>
          <a href="/about">Contact me</a></p>
      </div>
    </div>
  </div>
</footer>
    
  </body>
</html>